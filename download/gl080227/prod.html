<HTML><HEAD><TITLE>GPSロガー 製造マニュアル</TITLE></HEAD><BODY>

<H1>GPSロガー 製造マニュアル</H1>

<H2>部品表</H2>

<H3>-- 観測記録部</H3>

<TABLE border>
<TR><TH>種別
	<TH>型番
		<TH>数
			<TH>重量
<TR><TD>バッテリー
	<TD>3HB70
		<TD>1
			<TD>11.2g
<TR><TD>GPSモジュール
	<TD>GH-80
		<TD>1
			<TD>10.6g
<TR><TD>フィルムケース
	<TD>富士写真フィルム製
		<TD>1
			<TD>5.7g
<TR><TD>プリント基板
	<TD>-
		<TD>1
			<TD>1.3g
<TR><TD>メモリカードアダプタ
	<TD>miniSD→SD
		<TD>1
			<TD>1.1g
<TR><TD>メモリカード
	<TD>miniSDカード
		<TD>1
			<TD>0.9g
<TR><TD>マイコン
	<TD>PIC12C509A
		<TD>1
			<TD>
<TR><TD>C
	<TD>0.1μF
		<TD>1
			<TD>
<TR><TD>R
	<TD>200Ω
		<TD>1
			<TD>
<TR><TD>LED
	<TD>-
		<TD>1
			<TD>
<TR><TD>ジャンパスイッチ
	<TD>2P
		<TD>1
			<TD>
<TR><TD>コネクタ
	<TD>SM09B-SSR-H-TB
		<TD>1
			<TD>
<TR><TD>ピンヘッダ
	<TD>3×1P
		<TD>1
			<TD>
<TR><TD>スズめっき線
	<TD>
		<TD>
			<TD>
<TR><TD>絶縁テープ
	<TD>
		<TD>
			<TD>
<TR><TH colspan=3>合計
			<TD><B>32.3g</B>
</TABLE>

<H3>-- 充電部</H3>

<TABLE border>
<TR><TH>種別
	<TH>型番
		<TH>数
<TR><TD>タイマー
	<TD>AC100V 8時間
		<TD>1
<TR><TD>ACアダプタ
	<TD>AC100V→DC12V
		<TD>1
<TR><TD>DCジャック
	<TD>
		<TD>1
<TR><TD>R
	<TD>470Ω
		<TD>2
<TR><TD>ピンヘッダ
	<TD>4×1P
		<TD>1
<TR><TD>コネクタ
	<TD>3P
		<TD>2
<TR><TD>コネクタ
	<TD>4P×1
		<TD>1
<TR><TD>リード線
	<TD>
		<TD>
<TR><TD>熱収縮チューブ
	<TD>
		<TD>
</TABLE>

<H2>基板の仕様</H2>

<P> 基板は軽量化のため0.8mm厚にしましたが、これは重要ではありません。パターンが複雑なのは、ピン配置を試作版(片面基板)と同じにしたためです。大きい丸は、当初ボタン電池を使う計画だった名残りです。</P>

<UL>
	<LI>garber data : <A href="data/gl050617.lzh">gl050617.lzh</A>
<A href="pcb.png"><IMG alt="" src="small/pcb.png"></A>
</UL>

<P><IMG alt="" src="circuit.png"></P>

<H2>DIP版/表面実装版</H2>

<P> 基板は、DIP部品でも表面実装部品でも取りつけられるようになっています。</P>

<P align=center>
<A href="dip.jpeg"><IMG alt="" src="small/dip.jpeg"></A>
<A href="flat.jpeg"><IMG alt="" src="small/flat.jpeg"></A>
</P>

<P> マイコン(PIC12C509A)は、DIP版の場合は外側の穴を、表面実装版であれば内側のパターンを使ってください。</P>

<P> GPSコネクタは、DIP版の場合は4Pのピンヘッダを、表面実装版であればパターンを使ってください。DIP版の場合、GPSモジュールからの配線を4Pのコネクタに変換する必要があります。</P>

<P> CRとLEDは、DIP部品と表面実装部品のどちらでも使えるようになっています。Cについては穴の間隔も2種類用意してあります。</P>

<P> GPSモジュールの金属部分が基板と接触しないように、絶縁テープを貼ってください。</P>

<H2>プログラムの書き込み</H2>

<P> マイコンは、プログラムを書き込んだ状態で取りつけてください。DIP版の場合はICソケットを使用することもできます。</P>

<UL>
	<LI><A href="pic/gpslog3.src">gpslog3.src</A>
	<LI><A href="pic/gpslog3.lst">gpslog3.lst</A>
	<LI><A href="pic/gpslog3.obj">gpslog3.obj</A>
</UL>

<P> なお、コネクタとメモリカードに何も接続しない状態であれば、書き込みに必要な端子はオープンになりますので、実装後の書き込みも可能です。なお、筆者の環境ではV+(ピン1)をライターに接続した状態では、パスコンの影響かうまく読み書きできませんでした。</P>

<H2>レギュレータ</H2>

<P> 設計変更の経緯により、3端子レギュレータのパターンが残っています。単3電池などで駆動する場合には、3端子レギュレータを実装すると3.3Vを作ることができます。電源は充電コネクタから供給します。</P>

<P> 3端子レギュレータのピン配置に合わせられるように、2種類の穴が用意してあります。センターグランドのタイプであれば、表面実装にも対応しています。</P>

<P align=center><A href="regulator.jpeg"><IMG alt="" src="small/regulator.jpeg"></A></P>

<H2>メモリカードアダプタ</H2>

<P> 端子部にスズめっき線を半田付けしておき、これを基板に半田付けします。全部の部品の半田付けが終わったら、スズめっき線の部分で2つに折るようにして、基板に重ねます。</P>

<P align=center><A href="socket.jpeg"><IMG alt="" src="small/socket.jpeg"></A></P>

<P> メモリカードアダプタには、熱に弱い種類もあるようなので、注意してください。</P>

<H2>バッテリーの実装方法</H2>

<P> 現状の基板では、バッテリーの足をうまく曲げる必要があります。面倒であれば、メモリカードアダプタのマイナス端子につないでしまっても構わないと思います。</P>

<P align=center>
<A href="battery1.jpeg"><IMG alt="" src="small/battery1.jpeg"></A>
<A href="battery2.jpeg"><IMG alt="" src="small/battery2.jpeg"></A>
</P>

<H2>充電部</H2>

<P> DCジャックのマイナス端子を少し細く加工して、4Pのピンヘッダを差し込み、半田付けして固定します。DCジャックのプラス端子から、ピンヘッダの両側の端子に、それぞれ抵抗を半田付けします。絶縁のため、この状態で熱収縮チューブをかけるとよいでしょう。あとはコネクタを配線して完了です。観測記録部のコネクタは、中央のピンがマイナスです。</P>

<P align=center><A href="charger.jpeg"><IMG alt="" src="small/charger.jpeg"></A></P>

<P> タイマーは、家庭用の12時間タイマーを使いました。「オフのみ」が指定できるタイプであれば、24時間タイマーも使用できます。</P>

<H2>メモリカードの初期化</H2>

<P> メモリカードはあらかじめFAT16でフォーマットし、gps.logという記録用ファイルを格納しておきます。gps.logは自動的には大きくならないので、あらかじめ記録するサイズに合わせて大きくしておきます。</P>

<UL>
	<LI><A href="data/gps.log">gps.log</A> (1時間版)
	<LI><A href="data/gpsd.log">gpsd.log</A> (10分版)
</UL>

<P> gps.logはルートディレクトリの最初の16エントリ以内に置く必要がありますが、フォーマット直後に1ファイルだけコピーすれば、問題ありません。また、FAT16でフォーマットする環境が用意できない場合は、確実にFAT16でフォーマットされている256MBのメモリカードを使用する方法もあります。</P>

<P> ファイル名がgpsd.logになっていると、衛星捕捉まではメモリカードへの記録がおこなわれません。</P>

<H2>サーバ環境の構築</H2>

<P> PHPとGD2が動作するHTTPサーバが必要です。無償で入手できるものとしてはApacheがあり、商用サーバなどで数多くの実績があります。Windows版もUNIX版もありますので、環境に合ったものを選択してください。なお、いわゆるホスティングサービスでは、これらがはじめから提供されているものも多数あります。</P>

<UL>
	<LI><A href="http://www.apache.org/">http://www.apache.org/</A>
	<LI><A href="http://www.php.net/">http://www.php.net/</A>
</UL>

<P> PHPはサーバサイド言語で、HTTPサーバからCGIで起動するか、またはHTTPサーバにモジュールを組みこんで使用します。また、PHPにはGDエクステンションを組みこんでおく必要があります。ここまでの作業は、インターネットや書籍にさまざまな情報が出ていますので、参照してください。</P>

<P> 設定が正しければ、glogana.phpをHTTPサーバからアクセスできるディレクトリに置き、webブラウザからアクセスすると、解析画面が表示されます。</P>

<UL>
	<LI><A href="php/glogana.php">glogana.php</A>
</UL>

<HR>
</BODY></HTML>
